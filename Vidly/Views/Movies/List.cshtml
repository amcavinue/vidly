@model System.Collections.Generic.List<Vidly.Models.Movie>
@{
    ViewBag.Title = "Index";
    Layout = "";
}

<h2>Movies</h2>

@*Html.ActionLink("New Movie", "New", new {}, new { @class = "btn btn-primary", role = "button", style = "margin-bottom: 1em;" })*@
<a ui-sref="moviesAdmin.New" class="btn btn-primary" role="button" style="margin-bottom: 1em;">New Movie</a>

@if (Model.Count == 0)
{
    <text>We don't have any movies yet.</text>
}
else
{
    <table id="movies" class="table table-bordered table-hover">
        <thead></thead>
        <tbody>
            @foreach (var movie in Model)
            {
                <tr>
                    <td><a ui-sref="moviesAdmin.Edit({movieId: @movie.Id})">@movie.Name</a></td>
                    <td>@movie.Genre.Name</td>
                    <td>
                        @if (@movie.FileLocation != null)
                        {
                            <img src="@Href(movie.FileLocation)" class="admin-movie-img" alt="movie image"/>

                        }
                        else
                        {
                            <span>No image.</span>
                        }
                    </td>
                    <td>
                        <button class='btn-link movie-delete' data-movie-id="@movie.Id">
                            Delete
                        </button>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
